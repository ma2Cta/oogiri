# 大喜利アプリケーション 要件定義書

## 1. 概要
このアプリケーションは、友人同士でカジュアルに楽しめる大喜利プラットフォームを提供することを目的としています。スマートフォンに対応したウェブアプリケーションとして開発され、ネイティブアプリではなく、ウェブブラウザからアクセスできる形式です。

## 2. ユーザー
対象とするユーザーは、カジュアルに友人同士で楽しむ成人を想定しています。

## 3. 主要機能
- **問題生成**: AIによって自動的に大喜利のお題を生成します。
  - お題はゲーム開始時に生成され、テキスト形式で提供されます。
  - お題の生成にはOpenAI APIを利用します。
- **回答機能**: ユーザーはテキストベースでお題に対して回答を入力できます。
  - 各ユーザーは一度だけ回答可能です。
  - 回答の提出状況をリアルタイムで表示します。
- **採点機能**: 参加者全員が回答後、それぞれの回答に投票することで採点を行います。全員の投票が終了次第、結果が表示されます。
  - 自分以外の回答に対して投票可能です。
  - 投票結果はリアルタイムで集計されます。

## 4. 技術スタック
- **フロントエンド**: レスポンシブウェブデザインを採用し、スマートフォンのウェブブラウザから利用可能です。
  - 使用技術: Next.js（TypeScript）、Tailwind CSS、shadcn/ui
- **バックエンド**: APIサーバーを実装し、PostgreSQLを利用してデータを管理します。ユーザーログイン機能は初期段階では含まず、匿名での利用が可能です。
  - 使用技術: Rust、Actix-web
- **データベース**: PostgreSQL（AWS RDS）
- **インフラストラクチャ**: AWS ECS（Fargate）、AWS RDS、AWS S3、CloudFront
- **AIの利用**: 問題生成にAIを活用し、開発過程ではコード生成のためにAIを利用する予定です。
  - 使用API: OpenAI API

## 5. ユーザーインターフェース
シンプルで直感的なインターフェースを目指します。ユーザーはお題に対して回答を送信し、全員の回答が集まると、それぞれの回答が順に表示されるようにします。各ユーザーは他のユーザーの回答に投票することができます。

## 6. データ管理
ユーザーデータや回答データは、PostgreSQLを用いて管理します。ゲーム、回答、投票の関連性を適切に設計し、効率的なデータ取得と管理を行います。

## 7. 開発環境
- ローカル開発環境はDocker Composeを利用し、Rustアプリケーション、PostgreSQLデータベース、Next.jsアプリケーションをコンテナ化します。
- CI/CDにはGitHub Actionsを使用し、自動ビルド、テスト、デプロイを行います。

## 8. セキュリティとプライバシー
- ユーザーデータは匿名で扱い、個人を特定できる情報は収集しません。
- クライアントサイドで生成されたUUIDをユーザー識別に使用します。

## 9. スケーラビリティ
- AWS ECS（Fargate）とRDSを利用することで、将来的な拡張に対応できる構成とします。
- 初期段階では小規模なグループ（最大10人程度）での利用を想定しますが、需要に応じて拡張可能な設計とします。

## 10. パフォーマンス
- ユーザー操作に対して3秒以内の応答を目標とします。
- リアルタイムでの回答状況や投票結果の更新を実現します。

## 11. 保守性
- コードの可読性と保守性を重視し、適切なコメントとドキュメンテーションを提供します。
- モジュール化された設計を採用し、将来の機能追加や変更に柔軟に対応できるようにします。
